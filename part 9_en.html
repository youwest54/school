<!DOCTYPE html>
<html lang="en"><head>
  <link rel="manifest" href="./manifest.json">
  <meta name="theme-color" content="#1976d2">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./icons/icon-192.png">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Flashcards</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,BlinkMacSystemFont,sans-serif;
     background:#fafafa;color:#333;
     max-width:600px;margin:0 auto;padding:1rem;
     padding-bottom:4rem;}
h1{text-align:center;margin-bottom:1rem;font-size:1.8rem}
.flashcard{background:#fff;border:1px solid #ddd;border-radius:12px;
           padding:1.5rem;margin-bottom:1.5rem;position:relative;
           touch-action:manipulation;min-height:200px;cursor:pointer}
.flashcard.remembered{border-color:#43a047}
.remembered-badge{position:absolute;top:8px;right:12px;
                  background:#43a047;color:#fff;border-radius:8px;
                  padding:2px 6px;font-size:.75rem;display:none}
.flashcard.remembered .remembered-badge{display:block}
.content{font-size:1.5rem;min-height:7em;
         display:flex;align-items:center;justify-content:center;
         margin-bottom:.75rem}
.buttons{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center}
.buttons button{flex:1 1 30%;padding:.5rem;font-size:1rem;
                border:none;border-radius:8px;cursor:pointer}
.remember-button{background:#eee;color:#333}
.remember-button.remembered{background:#43a047;color:#fff}
.play-button{background:none;font-size:1.2rem;color:#1976d2}
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;
       background:rgba(0,0,0,.5);align-items:center;justify-content:center;
       z-index:1000}
.modal-content{background:#fff;border-radius:12px;
               padding:1.5rem;max-width:90%;width:320px}
.modal-content h2{margin-bottom:.5rem;font-size:1.2rem}
.modal-content label{display:block;margin:.5rem 0 .25rem}
.modal-content select,
.modal-content input[type="range"]{width:100%}
.modal-content .close{float:right;font-size:1.2rem;cursor:pointer}
.lang-settings{padding:1rem 0;margin-bottom:1.5rem;min-height:180px}
#settings-button,#flip-all-button{position:fixed;bottom:1rem;
  z-index:1001;background:#fff;border:none;border-radius:50%;
  padding:.5rem;font-size:1.5rem;cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,.2)}
#settings-button{right:1rem}#flip-all-button{right:4rem}
#return-button{position:fixed;bottom:1rem;left:50%;
  transform:translateX(-50%);background:#1976d2;color:#fff;
  border:none;border-radius:20px;padding:.75rem 1.5rem;
  font-size:1rem;cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2);
  z-index:1001}
</style>
</head><body>
<h1>Flashcards</h1>
<button id="flip-all-button" title="Flip all cards to Arabic">üîÑ</button>
<button id="settings-button" title="Settings">‚öôÔ∏è</button>
<div id="card-container"></div>
<div id="settings-modal" class="modal">
  <div class="modal-content">
    <span class="close" title="Close">√ó</span>
    <h2>Voice Settings</h2>
    <div class="lang-settings" data-lang="ar">
      <label>Arabic Voice:</label>
      <select class="voice-select"></select>
      <label>Rate: <span class="rate-value">1</span></label>
      <input type="range" class="rate-range" min="0.5" max="2" step="0.1" value="1">
      <label>Pitch: <span class="pitch-value">1</span></label>
      <input type="range" class="pitch-range" min="0" max="2" step="0.1" value="1">
    </div><hr>
    <div class="lang-settings" data-lang="en">
      <label>English Voice:</label>
      <select class="voice-select"></select>
      <label>Rate: <span class="rate-value">1</span></label>
      <input type="range" class="rate-range" min="0.5" max="2" step="0.1" value="1">
      <label>Pitch: <span class="pitch-value">1</span></label>
      <input type="range" class="pitch-range" min="0" max="2" step="0.1" value="1">
    </div><hr>
    <div class="lang-settings" data-lang="fr">
      <label>French Voice:</label>
      <select class="voice-select"></select>
      <label>Rate: <span class="rate-value">1</span></label>
      <input type="range" class="rate-range" min="0.5" max="2" step="0.1" value="1">
      <label>Pitch: <span class="pitch-value">1</span></label>
      <input type="range" class="pitch-range" min="0" max="2" step="0.1" value="1">
    </div><hr>
  </div>
</div>
<button id="return-button" onclick="window.location.href='index_en.html'">
  ‚Üê Return to Main Page
</button>
<script>
const cards = [
  {arabic:"\u0623\u0648\u062f \u0623\u0646 \u0623\u0630\u0643\u0631\u0643\u060c \u0623\u0646\u0647 \u064a\u0645\u0643\u0646\u0643 \u0627\u0644\u062a\u0639\u0628\u064a\u0631 \u0639\u0646 \u062c\u0645\u064a\u0639 \u0622\u0631\u0627\u0626\u0643 \u0628\u0634\u0643\u0644 \u0643\u0627\u0645\u0644\u060c \u0644\u0643\u0646 \u0639\u0644\u064a\u0643 \u0623\u0646 \u062a\u0638\u0647\u0631 \u0627\u0644\u0627\u062d\u062a\u0631\u0627\u0645 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062a\u0648\u0627\u062c\u062f\u064a\u0646\u060c \u0647\u0630\u0647 \u0627\u0644\u0642\u0648\u0627\u0639\u062f \u0627\u0644\u062a\u064a \u064a\u062c\u0628 \u0639\u0644\u0649 \u0627\u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0627\u0644\u062a\u0632\u0627\u0645 \u0628\u0647\u0627",english:"I would like to remind you that you are free to express all your opinions fully, but it is important to show respect to everyone present. These are the rules that everyone should adhere to.",french:"Je tiens \u00e0 vous rappeler que vous \u00eates libre d'exprimer toutes vos opinions en toute libert\u00e9, mais il est important de respecter la pr\u00e9sence de chacun. Ce sont les r\u00e8gles auxquelles tout le monde devrait adh\u00e9rer."},
  {arabic:"\u0627\u0644\u0643\u0644\u064a\u0629 \u0644\u064a\u0633\u062a \u0644\u0644\u062c\u0645\u064a\u0639 \u0648\u0647\u0646\u0627\u0643 \u0627\u0644\u0639\u062f\u064a\u062f \u0645\u0646 \u0627\u0644\u0637\u0631\u0642 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u062a\u0639\u0644\u064a\u0645",english:"College is not for everybody, and there are many ways to get an education.",french:"L'universit\u00e9 n'est pas pour tout le monde, et il existe de nombreuses fa\u00e7ons de se former."},
  {arabic:"\u0623\u062a\u062d\u062f\u062b \u0645\u0646 \u0645\u0646\u0638\u0648\u0631 \u0625\u0646\u0633\u0627\u0646\u064a \u0639\u0627\u0645",english:"Talking from a very general humanistic perspective",french:"Parler d'un point de vue humaniste tr\u00e8s g\u00e9n\u00e9ral"},
  {arabic:"\u0627\u0644\u0647\u062c\u0648\u0645 \u0627\u0644\u0630\u064a \u0623\u062f\u0649 \u0625\u0644\u0649",english:"The attack that led to",french:"L'attaque qui a men\u00e9 \u00e0"},
  {arabic:"\u0627\u0644\u062a\u0639\u0642\u064a\u062f\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0642\u0629",english:"Absolute intricacies",french:"Les complexit\u00e9s absolues"},
  {arabic:"\u0647\u0644 \u0648\u0635\u0644\u062a\u061f",english:"Have you arrived?",french:"Es-tu arriv\u00e9 ?"},
  {arabic:"\u0641\u064a \u0628\u0639\u0636 \u0627\u0644\u0623\u062d\u064a\u0627\u0646 \u064a\u062c\u0628 \u0627\u0644\u0642\u064a\u0627\u0645 \u0628\u062a\u0646\u0627\u0632\u0644\u0627\u062a",english:"Sometimes compromises have to be made",french:"Parfois, des compromis doivent \u00eatre faits"},
  {arabic:"\u0644\u0627 \u0623\u0641\u0647\u0645",english:"Beats me",french:"\u00c7a me d\u00e9passe"},
  {arabic:"\u0627\u0644\u062a\u0631\u0647\u064a\u0628",english:"Hectoring",french:"Harc\u00e8lement"},
  {arabic:"\u062f\u0648\u0644\u0629 \u0630\u0648 \u0633\u064a\u0627\u062f\u0629",english:"Sovereign state / Independent state",french:"\u00c9tat souverain / \u00c9tat ind\u00e9pendant"},
  {arabic:"\u0627\u0644\u0645\u062b\u0627\u0628\u0631\u0629",english:"Perseverance",french:"Pers\u00e9v\u00e9rance"},
];
// Remembered state
let rememberedStates = {};
try { rememberedStates = JSON.parse(localStorage.getItem('flashcardRemembered'))||{}; } catch {}
function saveRemembered(){ localStorage.setItem('flashcardRemembered',JSON.stringify(rememberedStates)); }
// Voice settings
const voiceSettings = { ar:{voiceURI:null,rate:1,pitch:1}, en:{voiceURI:null,rate:1,pitch:1}, fr:{voiceURI:null,rate:1,pitch:1} };
const sv = localStorage.getItem('flashcardVoiceSettings');
if(sv) Object.assign(voiceSettings,JSON.parse(sv));
function populateVoiceSelects(){
  const vlist = speechSynthesis.getVoices();
  document.querySelectorAll('.lang-settings').forEach(cfg=>{
    const lang=cfg.dataset.lang, sel=cfg.querySelector('.voice-select');
    sel.innerHTML='';
    vlist.filter(v=>v.lang.startsWith(lang))
         .forEach(v=>sel.append(new Option(`${v.name} (${v.lang})`,v.voiceURI)));
    if(voiceSettings[lang].voiceURI) sel.value=voiceSettings[lang].voiceURI;
  });
}
speechSynthesis.onvoiceschanged=populateVoiceSelects;
// Modal controls
const modal=document.getElementById('settings-modal');
document.getElementById('settings-button').onclick=()=>{ populateVoiceSelects(); modal.style.display='flex'; };
modal.querySelector('.close').onclick=()=>{ modal.style.display='none'; localStorage.setItem('flashcardVoiceSettings',JSON.stringify(voiceSettings)); };
document.querySelectorAll('.lang-settings').forEach(cfg=>{
  const lang=cfg.dataset.lang;
  cfg.querySelector('.voice-select').onchange=e=>voiceSettings[lang].voiceURI=e.target.value;
  const rate=cfg.querySelector('.rate-range'), rv=cfg.querySelector('.rate-value');
  rate.oninput=e=>{rv.textContent=e.target.value;voiceSettings[lang].rate=+e.target.value;};
  rate.value=voiceSettings[lang].rate; rv.textContent=rate.value;
  const pitch=cfg.querySelector('.pitch-range'), pv=cfg.querySelector('.pitch-value');
  pitch.oninput=e=>{pv.textContent=e.target.value;voiceSettings[lang].pitch=+e.target.value;};
  pitch.value=voiceSettings[lang].pitch; pv.textContent=pitch.value;
});
// Card builder
function createCard(d,i){
  const card=document.createElement('div'); card.className='flashcard'; card.dataset.side=0;
  const badge=document.createElement('span'); badge.className='remembered-badge'; badge.textContent='Remembered ‚úì';
  card.append(badge);
  const content=document.createElement('div'); content.className='content'; card.append(content);
  const render=()=>{ content.textContent=[d.arabic,d.english,d.french][+card.dataset.side]; };
  render();
  card.onclick=e=>{ if(!e.target.closest('button')){ card.dataset.side=(+card.dataset.side+1)%3; render(); } };
  const btns=document.createElement('div'); btns.className='buttons';
  const remBtn=document.createElement('button'); remBtn.className='remember-button';
  const applyR=st=>{ card.classList.toggle('remembered',st); remBtn.classList.toggle('remembered',st);
                     remBtn.textContent=st?'Unmark Remembered':'Mark as Remembered'; };
  applyR(!!rememberedStates[i]);
  remBtn.onclick=()=>{ rememberedStates[i]=!rememberedStates[i]; applyR(rememberedStates[i]); saveRemembered(); };
  btns.append(remBtn);
  const playBtn=document.createElement('button'); playBtn.className='play-button'; playBtn.textContent='üîä';
  playBtn.onclick=()=>{
    const side=+card.dataset.side, txt=[d.arabic,d.english,d.french][side], lang=['ar','en','fr'][side];
    const u=new SpeechSynthesisUtterance(txt), s=voiceSettings[lang];
    if(s.voiceURI) u.voice=speechSynthesis.getVoices().find(v=>v.voiceURI===s.voiceURI); else u.lang=lang;
    u.rate=s.rate; u.pitch=s.pitch; speechSynthesis.speak(u);
  };
  btns.append(playBtn);
  card.append(btns);
  return card;
}
// Flip-all
document.getElementById('flip-all-button').onclick=()=>{
  document.querySelectorAll('.flashcard').forEach((c,i)=>{
    c.dataset.side=0; c.querySelector('.content').textContent = cards[i].arabic;
  });
};
// Init
window.addEventListener('DOMContentLoaded',()=>{
  const cont=document.getElementById('card-container');
  cards.forEach((c,i)=>cont.append(createCard(c,i)));
  if('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js');
});
</script>
<p style="margin:20px 0;">
  <a href="index_en.html">‚Üê Back to English index</a>
</p>
</body></html>