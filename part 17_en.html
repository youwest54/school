<!DOCTYPE html>
<html lang="ar"><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>Flashcards</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,BlinkMacSystemFont,sans-serif;
     background:#fafafa;color:#333;max-width:600px;margin:0 auto;padding:1rem;
     padding-bottom:4rem}
h1{text-align:center;margin-bottom:1rem;font-size:1.8rem}
.flashcard{background:#fff;border:1px solid #ddd;border-radius:12px;
           padding:1.5rem;margin-bottom:1.5rem;position:relative;
           touch-action:manipulation;min-height:200px;cursor:pointer}
.flashcard.remembered{border-color:#43a047}
.remembered-badge{position:absolute;top:8px;right:12px;background:#43a047;
                  color:#fff;border-radius:8px;padding:2px 6px;font-size:.75rem;
                  display:none}
.flashcard.remembered .remembered-badge{display:block}
.content{font-size:1.5rem;min-height:7em;display:flex;align-items:center;
         justify-content:center;margin-bottom:.75rem}
.buttons{display:flex;flex-wrap:wrap;gap:.5rem;justify-content:center}
.buttons button{flex:1 1 30%;padding:.5rem;font-size:1rem;border:none;
                border-radius:8px;cursor:pointer}
.remember-button{background:#eee;color:#333}
.remember-button.remembered{background:#43a047;color:#fff}
.play-button{flex:none;width:4rem;height:4rem;padding:0;border:none;
             border-radius:50%;font-size:2.5rem;background:#fff;color:#1976d2;
             display:flex;align-items:center;justify-content:center;cursor:pointer;
             box-shadow:0 2px 6px rgba(0,0,0,.2)}
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;
       background:rgba(0,0,0,.5);align-items:center;justify-content:center;
       z-index:1000}
.modal-content{background:#fff;border-radius:12px;padding:1.5rem;
               max-width:90%;width:320px}
.modal-content h2{margin-bottom:.5rem;font-size:1.2rem}
.modal-content label{display:block;margin:.5rem 0 .25rem}
.modal-content select,
.modal-content input[type=range]{width:100%}
.modal-content .close{float:right;font-size:1.2rem;cursor:pointer}
.lang-settings{padding:1rem 0;margin-bottom:1.5rem;min-height:180px}
#settings-button,#flip-all-button{position:fixed;bottom:1rem;z-index:1001;
  background:#fff;border:none;border-radius:50%;width:4rem;height:4rem;
  padding:0;font-size:2.5rem;display:flex;align-items:center;justify-content:center;
  cursor:pointer;box-shadow:0 2px 6px rgba(0,0,0,.2)}
#flip-all-button{right:6rem}#settings-button{right:1rem}

 /* ---------- 10 rem Return button that respects the iPhone safe-area ---------- */
#return-button{
  position:fixed;
  bottom:calc(env(safe-area-inset-bottom,0) + 1rem);
  left:  calc(env(safe-area-inset-left ,0) + 1rem);

  width:10rem;
  height:10rem;
  font-size:4rem;

  border:none;
  border-radius:50%;
  background:#1976d2;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  box-shadow:0 3px 8px rgba(0,0,0,.25);
  z-index:1002;
  cursor:pointer;
  touch-action:manipulation;
}
/* auto-shrink on very small screens (e.g. iPhone SE) */
@media (max-width:375px){
  #return-button{
    width:7rem;
    height:7rem;
    font-size:3rem;
  }
}
</style>
</head><body>
<h1>Flashcards</h1>
<button id="flip-all-button" title="Flip all cards">üîÑ</button>
<button id="settings-button"  title="Settings">‚öôÔ∏è</button>
<div id="card-container"></div>

<!-- Settings modal ---------------------------------------------------------->
<div id="settings-modal" class="modal"><div class="modal-content">
<span class="close" title="Close">√ó</span><h2>Voice Settings</h2>
<div class="lang-settings" data-lang="ar">
  <label>Arabic voice:</label>
  <select class="voice-select"></select>
  <label>Rate: <span class="rate-value">1</span></label>
  <input type="range" class="rate-range" min="0.5" max="2" step="0.1" value="1">
  <label>Pitch: <span class="pitch-value">1</span></label>
  <input type="range" class="pitch-range" min="0" max="2" step="0.1" value="1">
</div><hr>
<div class="lang-settings" data-lang="en">
  <label>English voice:</label>
  <select class="voice-select"></select>
  <label>Rate: <span class="rate-value">1</span></label>
  <input type="range" class="rate-range" min="0.5" max="2" step="0.1" value="1">
  <label>Pitch: <span class="pitch-value">1</span></label>
  <input type="range" class="pitch-range" min="0" max="2" step="0.1" value="1">
</div><hr>
<div class="lang-settings" data-lang="fr">
  <label>French voice:</label>
  <select class="voice-select"></select>
  <label>Rate: <span class="rate-value">1</span></label>
  <input type="range" class="rate-range" min="0.5" max="2" step="0.1" value="1">
  <label>Pitch: <span class="pitch-value">1</span></label>
  <input type="range" class="pitch-range" min="0" max="2" step="0.1" value="1">
</div><hr>
</div></div>

<button id="return-button" title="Return">‚Üê</button>

<script>
const LANGS = ["ar", "en", "fr"];
const CARDS = [{"ar": "ÿ™Ÿáÿ¨", "en": "Spell", "fr": "√âpeler"}, {"ar": "ÿ™ŸÜÿßÿ∫ŸÖ", "en": "Coherence", "fr": "Coh√©rence"}, {"ar": "ÿ¨ÿ≥ÿØ ÿ±ÿßÿ¶ÿπ ÿ®ÿ±Ÿàÿ≠ ŸÇÿßÿ™ŸÖÿ©", "en": "Gorgeous body with a dark spirit", "fr": "Un corps magnifique avec une √¢me sombre"}, {"ar": "ŸÑÿß ÿßÿ≠ÿ® ÿßŸÑÿ≠ÿØŸäÿ´ ÿßŸÑŸÖÿ∑ŸÑŸÇ", "en": "I don‚Äôt like to talk in absolutes", "fr": "Je n'aime pas parler en termes absolus"}, {"ar": "ŸÖÿ≥ÿ¶ŸàŸÑŸäÿ©", "en": "Accountability", "fr": "Responsabilit√©"}, {"ar": "ŸÖÿπŸÅŸâ", "en": "Exempted", "fr": "Exempt√©"}, {"ar": "communautarisme", "en": "Communitarism", "fr": "Communautarisme"}, {"ar": "ÿπÿØŸÑ ÿßŸÑŸÜŸàÿßÿ® ŸÜÿµ ÿßŸÑŸÇÿßŸÜŸàŸÜ Ÿáÿ∞ÿß", "en": "The deputies amended this law", "fr": "Les d√©put√©s ont amend√© ce texte de loi"}, {"ar": "ÿ∫Ÿäÿ± ŸàÿßÿπŸç", "en": "Oblivious", "fr": "Inconscient / Inconsciente"}, {"ar": "ŸàÿßŸÑŸÑŸä ŸäÿÆŸÑŸä ŸÖÿØŸäŸÜŸá ŸÜŸäŸàÿ±ŸÉ ŸÖÿ™ŸÖŸäÿ≤Ÿá", "en": "What makes New York City special?", "fr": "Qu'est-ce qui distingue la ville de New York ?"}, {"ar": "ŸÑŸÖÿßÿ∞ÿß ÿ™Ÿáÿ™ŸÖ ÿ®ŸÖÿπÿ±ŸÅÿ© ÿ∞ŸÑŸÉÿü", "en": "But why do you care to know?", "fr": "Mais pourquoi tu te souci√©s de savoir ?"}, {"ar": "ÿÆÿ≤ÿßÿ¶ŸÜ", "en": "Wardrobes", "fr": "Placards"}, {"ar": "ÿ™ŸÖŸÜŸäÿ™ ŸÑŸà ŸÉŸÜÿ™ ÿ£ŸÉÿ´ÿ± ÿ≠ŸÉŸÖÿ© ŸÅŸä ÿ∞ŸÑŸÉ ÿßŸÑŸàŸÇÿ™", "en": "I wished I was wiser at the time", "fr": "J'aurais aim√© √™tre plus sage √† l'√©poque"}, {"ar": "ŸÅŸä Ÿáÿ∞ÿß ÿßŸÑÿ®ŸÑÿØ ÿßŸÑÿ¨ŸÖŸäÿπ ÿ≠ÿ± ŸÅŸä ŸÅÿπŸÑ ŸÖÿß Ÿäÿ¥ÿßÿ°ÿå ÿ•ÿ∞ÿß ŸÑŸÖ Ÿäÿπÿ¨ÿ®ŸÉ ÿ∞ŸÑŸÉ", "en": "In this country, everyone is free to do what they want. If you don't like that, feel free to go back to where your ancestors came from because this land is not yours.", "fr": "Dans ce pays, chacun est libre de faire ce qu'il veut. Si vous n'aimez pas √ßa, n'h√©sitez pas √† retourner d'o√π viennent vos anc√™tres parce que cette terre n'est pas la v√¥tre."}, {"ar": "ÿ¥Ÿäÿ¶ÿß ŸÅÿ¥Ÿäÿ¶ÿßÿõ ÿ®ÿßÿ≥ÿ™ŸÖÿ±ÿßÿ±", "en": "Little by little; constantly", "fr": "Au fur et √† mesure"}, {"ar": "Ÿäÿ¨ÿ® ÿπŸÑŸâ ÿ™ÿ±ŸÉŸäÿß ÿ£ŸÜ ÿ™ŸÇÿ™ÿµÿ± ÿπŸÑŸâ ÿÆÿ±Ÿäÿ∑ÿ™Ÿáÿß ÿßŸÑÿ¨ÿ∫ÿ±ÿßŸÅŸäÿ©", "en": "Turkey should limit itself to its geographical borders and not intervene in conflicts.", "fr": "La Turquie doit se limiter √† sa carte g√©ographique et ne plus intervenir dans les conflits."}, {"ar": "ŸÖÿ≠ÿß", "en": "Rub out", "fr": "Effacer"}, {"ar": "ÿ•ŸÜŸá ÿ™ÿ£ÿ´Ÿäÿ± ÿ£ŸäÿØŸäŸàŸÑŸàÿ¨Ÿä Ÿäÿ£ÿ™Ÿä ŸÖŸÜ ÿ®ŸÇÿßŸäÿß ÿßŸÑŸÅÿ™ÿ±ÿ© ÿßŸÑÿßÿ≥ÿ™ÿπŸÖÿßÿ±Ÿäÿ© ÿßŸÑŸÇÿØŸäŸÖÿ©", "en": "It's an ideological effect from the remnants of the colonial period.", "fr": "C'est un effet id√©ologique qui vient de l'ancien vestige de la p√©riode coloniale."}, {"ar": "Ÿáÿ∞ÿß ÿßŸÑŸÜŸàÿπ ŸÖŸÜ ÿßŸÑÿ≥ŸÑŸàŸÉ ŸáŸà ÿ¨ÿ≤ÿ° ŸÖŸÜ ÿ®ŸÇÿßŸäÿß ÿßŸÑÿßÿ≥ÿ™ÿπŸÖÿßÿ±", "en": "This kind of behavior is part of the remnants of colonialism.", "fr": "Ce genre de comportement fait partie d'un vestige de la colonisation."}, {"ar": "ÿ™ÿµÿ±ŸÅ ÿ∫Ÿäÿ± ÿßŸÜÿ≥ÿßŸÜŸä", "en": "Inhumane behavior", "fr": "Comportement inhumain"}, {"ar": "ÿ™ÿØÿÆŸÑ", "en": "Interfere", "fr": "Interf√©rer"}, {"ar": "ÿ™ŸÖ ŸÅŸáŸÖ ÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ≠ÿ¨ÿ± ÿßŸÑÿµÿ≠Ÿä ŸáŸÜÿß", "en": "The confinement message was understood here.", "fr": "Le message de confinement a √©t√© compris ici."}, {"ar": "ÿπŸÜÿØŸÖÿß ÿ™ŸÇÿ™ÿ±ÿ®", "en": "When it comes closer", "fr": "Quand √ßa s'approche"}, {"ar": "ŸÖÿ∫ÿ±Ÿä", "en": "Tempting", "fr": "Tentant"}, {"ar": "ÿπÿ±Ÿäÿ≥", "en": "Bridegroom", "fr": "Jeune mari√©"}, {"ar": "ŸäŸÇÿßŸÑ ÿ£ŸÜ ÿßŸÑŸÖÿ¥ÿ™ÿ®Ÿá ÿ®Ÿá ÿÆÿØÿπ ÿπÿØÿØŸãÿß ŸÖŸÜ ŸÉÿ®ÿßÿ± ÿßŸÑÿ≥ŸÜ", "en": "The suspect apparently conned a number of elderly people.", "fr": "Le suspect a apparemment escroqu√© un certain nombre de personnes √¢g√©es."}, {"ar": "ÿßŸÑÿ£ŸÜÿßŸÜŸäÿ©", "en": "Selfishness", "fr": "√âgo√Øsme"}, {"ar": "ÿßŸÑŸäÿßÿ®ÿßŸÜ ÿ≥ÿ™ÿ≥ÿ™ÿ∂ŸäŸÅ ÿßŸÑÿ£ŸÑÿπÿßÿ® ÿßŸÑÿ£ŸàŸÑŸÖÿ®Ÿäÿ© \"ŸÉŸÖÿß ŸáŸà ŸÖÿÆÿ∑ÿ∑\"", "en": "Japan will host the Olympics \"as planned,\" assures the Prime Minister.", "fr": "Le Japon accueillera les JO ¬´ comme pr√©vu ¬ª, assure le Premier ministre."}, {"ar": "ŸÖÿ™ÿ∂ÿßŸÖŸÜ", "en": "United", "fr": "Solidaire"}, {"ar": "Ÿáÿ∞ÿß ÿßŸÑŸÅŸäÿ±Ÿàÿ≥ ÿ£ÿ∏Ÿáÿ± ŸÑŸÜÿß ÿßŸÑŸÉÿ´Ÿäÿ±", "en": "This virus has shown us a lot.", "fr": "Ce virus nous a beaucoup montr√©."}, {"ar": "ŸÑŸÖÿßÿ∞ÿß ÿ™ŸÜŸÅÿØ ÿ®ÿ∑ÿßÿ±Ÿäÿ™Ÿä ÿ®Ÿáÿ∞Ÿá ÿßŸÑÿ≥ÿ±ÿπÿ©ÿü", "en": "Why is my battery running down so fast?", "fr": "Pourquoi ma batterie s'√©puise si vite ?"}, {"ar": "ÿ£ŸÜÿßÿ®Ÿäÿ®", "en": "Pipes", "fr": "Tuyaux"}, {"ar": "ÿµÿØŸÖÿ© ŸàŸÅÿßÿ© ŸàÿßŸÑÿØŸáÿß ÿ™ÿ§ÿ∞ŸäŸáÿß ÿ≠ŸÇŸãÿß", "en": "The shock of her father's death really hurt her.", "fr": "Le choc de la mort de son p√®re lui a vraiment fait mal."}, {"ar": "ÿ£ÿ≠ÿØŸáŸÖ Ÿäÿ≥ÿßÿπÿØ Ÿáÿ∞ÿß ÿßŸÑÿ±ÿ¨ŸÑÿå ÿ•ŸÜŸá ŸäÿÆÿ™ŸÜŸÇ!", "en": "Someone help that man, he's choking!", "fr": "Quelqu'un aide cet homme, il s'√©touffe !"}, {"ar": "ÿßÿÆÿ™ŸÜŸÇ", "en": "Choke", "fr": "√âtouffer"}, {"ar": "ŸÉÿØÿ™ ÿ£ŸÜ ÿ£ŸÅŸÇÿØ ŸàÿπŸäŸä ÿπŸÜÿØŸÖÿß ÿ£ÿÆÿ®ÿ±ŸàŸÜŸä ÿ®ÿßŸÑÿ≥ÿπÿ±", "en": "I nearly fainted when they told me the price.", "fr": "Je me suis presque √©vanoui quand ils m'ont dit le prix."}, {"ar": "Ÿáÿ∞ÿß ÿ∫ÿ±Ÿäÿ®", "en": "That‚Äôs strange", "fr": "C'est √©trange"}, {"ar": "ÿßÿ≤ÿØÿ≠ÿßŸÖ ÿ≥ÿßÿπÿ© ÿßŸÑÿ∞ÿ±Ÿàÿ©", "en": "Rush hour traffic", "fr": "Embouteillages aux heures de pointe"}, {"ar": "ÿπŸÜÿØŸÖÿß ÿßÿ≥ÿ™ŸàŸÑÿ™ ÿßŸÑÿ¨ŸäŸàÿ¥ ÿßŸÑÿ®ÿ±Ÿäÿ∑ÿßŸÜŸäÿ© ÿπŸÑŸâ ŸÉŸäÿ®ŸäŸÉ ŸàŸÖŸàŸÜÿ™ÿ±ŸäÿßŸÑ", "en": "When British armies captured Quebec in 1759 and Montreal in 1760.", "fr": "Quand les arm√©es britanniques ont captur√© Qu√©bec en 1759 et Montr√©al en 1760."}, {"ar": "ÿßŸÑÿ≥Ÿäÿßÿ≥ÿ© ÿßŸÑÿÆÿßÿ±ÿ¨Ÿäÿ©", "en": "Foreign Policy", "fr": "Politique √©trang√®re"}];

//  Remembered state ---------------------------------------------------------
let remembered = {};
try { remembered = JSON.parse(localStorage.getItem('flashcardRemembered')) || {}; } catch(e) {}
function saveRemembered(){ localStorage.setItem('flashcardRemembered', JSON.stringify(remembered)); }

//  Voice settings blob ------------------------------------------------------
const voiceSettings = Object.fromEntries(LANGS.map(l => [l,{voiceURI:null,rate:1,pitch:1}]));
try{{ Object.assign(voiceSettings, JSON.parse(localStorage.getItem('flashcardVoiceSettings')||'{{}}')); }}catch(e){{}}

//  Populate <select> on voices load ----------------------------------------
function populateVoiceSelects(){ const vlist = speechSynthesis.getVoices();
  document.querySelectorAll('.lang-settings').forEach(cfg=>{
      const lang=cfg.dataset.lang,sel=cfg.querySelector('.voice-select');
      sel.innerHTML='';
      vlist.filter(v=>v.lang.startsWith(lang))
           .forEach(v=>sel.append(new Option(`${v.name} (${v.lang})`,v.voiceURI)));
      sel.value = voiceSettings[lang].voiceURI || '';
  });
}
speechSynthesis.onvoiceschanged = populateVoiceSelects;

//  Build one card -----------------------------------------------------------
function createCard(data,idx){ const card=document.createElement('div');
  card.className='flashcard'; card.dataset.side=0;
  const badge=document.createElement('span'); badge.className='remembered-badge'; badge.textContent='Remembered ‚úì'; card.append(badge);
  const content=document.createElement('div'); content.className='content'; card.append(content);
  const render=()=>content.textContent=data[LANGS[+card.dataset.side]]||''; render();

  card.onclick=e=>{ if(e.target.closest('button'))return;
    card.dataset.side=(+card.dataset.side+1)%LANGS.length; render(); };

  const btns=document.createElement('div'); btns.className='buttons'; card.append(btns);

  const rem=document.createElement('button'); rem.className='remember-button';
  const applyR=st=>{{ card.classList.toggle('remembered',st); rem.classList.toggle('remembered',st);
                      rem.textContent=st?'Unmark Remembered':'Mark as Remembered'; }};
  applyR(!!remembered[idx]);
  rem.onclick=()=>{{ remembered[idx]=!remembered[idx]; applyR(remembered[idx]); saveRemembered(); }};
  btns.append(rem);

  const play=document.createElement('button'); play.className='play-button'; play.textContent='üîä';
  play.onclick=()=>{{ const side=+card.dataset.side,lang=LANGS[side],txt=data[lang]||'';
      const u=new SpeechSynthesisUtterance(txt),cfg=voiceSettings[lang];
      if(cfg.voiceURI)u.voice=speechSynthesis.getVoices().find(v=>v.voiceURI===cfg.voiceURI); else u.lang=lang;
      u.rate=cfg.rate; u.pitch=cfg.pitch; speechSynthesis.speak(u); }};
  btns.append(play);

  return card;
}

//  Settings modal -----------------------------------------------------------
const modal=document.getElementById('settings-modal');
document.getElementById('settings-button').onclick=()=>{{ populateVoiceSelects(); modal.style.display='flex'; }};
modal.querySelector('.close').onclick=()=>{{ modal.style.display='none';
    localStorage.setItem('flashcardVoiceSettings',JSON.stringify(voiceSettings)); }};
document.querySelectorAll('.lang-settings').forEach(cfg=>{{
    const lang=cfg.dataset.lang;
    cfg.querySelector('.voice-select').onchange=e=>voiceSettings[lang].voiceURI=e.target.value;
    const rate=cfg.querySelector('.rate-range'),rv=cfg.querySelector('.rate-value');
    rate.oninput=e=>{{ rv.textContent=e.target.value; voiceSettings[lang].rate=+e.target.value; }};
    rate.value=voiceSettings[lang].rate; rv.textContent=rate.value;
    const pitch=cfg.querySelector('.pitch-range'),pv=cfg.querySelector('.pitch-value');
    pitch.oninput=e=>{{ pv.textContent=e.target.value; voiceSettings[lang].pitch=+e.target.value; }};
    pitch.value=voiceSettings[lang].pitch; pv.textContent=pitch.value;
}});

//  Flip-all button ----------------------------------------------------------
document.getElementById('flip-all-button').onclick=()=>document.querySelectorAll('.flashcard').forEach((c,i)=>{{
    c.dataset.side=0; c.querySelector('.content').textContent=CARDS[i][LANGS[0]]||''; }});

//  Build cards on DOM ready -------------------------------------------------
window.addEventListener('DOMContentLoaded',()=>{{
    const cont=document.getElementById('card-container'); CARDS.forEach((d,i)=>cont.append(createCard(d,i)));
    if('serviceWorker' in navigator) navigator.serviceWorker.register('sw.js');
}});

//  ---- Return button with graceful fallback -------------------------------
document.getElementById('return-button').onclick=()=>{{
    if(history.length>1) history.back();
    else location.href='index.html';   // ‚óÄÔ∏è change if your ‚Äúhome‚Äù isn‚Äôt index.html
}};
</script>
</body></html>